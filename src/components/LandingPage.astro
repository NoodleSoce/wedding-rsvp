---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import heroImg from "../assets/hero-image.webp";
import { ui } from "../i18n/ui";

interface Props {
    lang: "en" | "ar";
}

const { lang } = Astro.props;
const t = ui[lang];

const rsvpLink = lang === "ar" ? "/ar/rsvp" : "/rsvp";
---

<Layout title={lang === "ar" ? "الرئيسية" : "Welcome"} lang={lang}>
    <main class="landing-page">
        <div class="content fade-in">
            <h1 class="stagger-1">{t["index.title"]}</h1>
            <p class="subtitle stagger-2">{t["index.subtitle"]}</p>

            <div class="hero-image-container stagger-3">
                <Image
                    src={heroImg}
                    alt="Zaid & Haya"
                    class="hero-img"
                    width={600}
                    densities={[1.5, 2]}
                    loading="eager"
                    fetchpriority="high"
                />
            </div>

            <a
                href={rsvpLink}
                class="btn-primary stagger-4"
                data-astro-prefetch
            >
                {t["index.cta"]}
            </a>
        </div>
    </main>
</Layout>

<style is:global>
    /* Animate header logo only on index page initial load */
    body:has(.landing-page) > .app-header {
        animation: fadeIn 0.5s ease-out forwards;
    }
</style>

<style>
    .landing-page {
        height: 100vh;
        height: 100dvh;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: var(--page-padding);
        padding-top: calc(var(--header-height) + var(--space-3xl));
        background: var(--color-bg);
        position: fixed;
        inset: 0;
        overflow: hidden;
        contain: layout style paint size;
        transform: translateZ(0);
    }

    .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        height: 100%;
        justify-content: center;
        position: relative;
        z-index: 1;
        gap: var(--space-md);
        max-width: var(--max-width);
        margin: 0 auto;
        width: 100%;
    }

    h1 {
        font-family: var(--font-body);
        font-size: var(--text-2xl);
        color: var(--color-white);
        margin-bottom: var(--space-sm);
        font-weight: 400;
        line-height: 1.1;
        padding: 0 var(--space-sm);
        font-style: italic;
    }

    .subtitle {
        font-size: var(--text-base);
        color: var(--color-white-muted);
        margin-bottom: 0;
        font-weight: 300;
        letter-spacing: 0.5px;
    }

    .hero-image-container {
        width: 100%;
        max-width: 280px;
        margin: var(--space-md) 0;
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-lg);
        flex-shrink: 0;
    }

    .hero-img {
        width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
    }

    .btn-primary {
        margin: 0 auto var(--space-3xl);
        width: 100%;
        max-width: 320px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: var(--color-white);
        box-shadow: var(--shadow-lg);
        font-weight: 500;
        padding: var(--space-md);
        font-size: var(--text-base);
        border-radius: var(--radius-full);
        transition:
            background-color 0.2s ease,
            border-color 0.2s ease;
        display: block;
        text-align: center;
        text-decoration: none;
    }

    .btn-primary:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: white;
    }
</style>
