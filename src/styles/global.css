/* ========================================
   WEDDING RSVP - Tailwind + Custom Design System
   ======================================== */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   BASE LAYER
   ======================================== */
@layer base {
    html {
        height: 100%;
        height: -webkit-fill-available;
        -webkit-tap-highlight-color: transparent;
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
        overscroll-behavior: none;
        scroll-behavior: auto;
        background: theme('colors.primary.900');
    }

    body {
        min-height: 100%;
        min-height: 100dvh;
        min-height: -webkit-fill-available;
        font-family: theme('fontFamily.serif');
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeSpeed;
        overscroll-behavior-y: none;
        touch-action: pan-y;
        -webkit-overflow-scrolling: touch;
        background: theme('colors.primary.900');
    }

    [dir="rtl"] body {
        font-feature-settings: "liga" 1, "calt" 1;
        font-family: theme('fontFamily.arabic');
    }

    h1,
    h2 {
        font-weight: 400;
        line-height: 1.2;
    }
}

/* ========================================
   COMPONENTS LAYER
   ======================================== */
@layer components {

    /* Page container */
    .page {
        @apply min-h-screen min-h-[100dvh] w-full flex justify-center items-center;
        padding: theme('spacing.header') theme('spacing.page-pad') theme('spacing.page-pad');
        background: theme('colors.primary.900');
    }

    @media (orientation: landscape) and (max-height: 500px) {
        .page {
            padding-top: calc(theme('spacing.header') + 1rem);
            align-items: flex-start;
        }
    }

    /* Content wrapper */
    .content {
        @apply flex flex-col items-center text-center w-full gap-4;
        max-width: theme('maxWidth.content');
        padding-bottom: theme('spacing.safe-bottom');
    }

    /* Glass card */
    .card {
        @apply w-full p-6 rounded-card shadow-card;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    /* Primary button */
    .btn {
        @apply flex justify-center items-center w-full min-h-[54px] px-6 py-4;
        @apply font-serif font-medium text-white cursor-pointer no-underline;
        @apply rounded-full select-none;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: background 0.1s ease, transform 0.05s ease;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }

    .btn:active {
        transform: scale(0.97);
        background: rgba(255, 255, 255, 0.2);
    }

    @media (hover: hover) {
        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
    }

    .btn:disabled {
        @apply opacity-50 pointer-events-none;
    }

    /* Form input */
    .input {
        @apply w-full min-h-[54px] p-4 font-serif text-[16px] text-white;
        @apply rounded-sm-card appearance-none;
        background: rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: border-color 0.05s ease;
    }

    .input::placeholder {
        color: rgba(255, 255, 255, 0.5);
    }

    .input:focus {
        @apply outline-none;
        border-color: rgba(255, 255, 255, 0.7);
    }

    [dir="rtl"] .input {
        @apply text-right;
    }

    [dir="rtl"] .input::placeholder {
        @apply text-right;
    }

    .input[type="number"] {
        @apply text-center;
    }
}

/* ========================================
   UTILITIES LAYER
   ======================================== */
@layer utilities {

    /* Animation delays */
    .anim-delay-1 {
        animation-delay: 0.01s;
    }

    .anim-delay-2 {
        animation-delay: 0.02s;
    }

    .anim-delay-3 {
        animation-delay: 0.03s;
    }

    .anim-delay-4 {
        animation-delay: 0.04s;
    }

    /* Glass effects */
    .glass-10 {
        background: rgba(255, 255, 255, 0.1);
    }

    .glass-20 {
        background: rgba(255, 255, 255, 0.2);
    }

    /* White opacity utilities */
    .text-white-90 {
        color: rgba(255, 255, 255, 0.9);
    }

    .text-white-70 {
        color: rgba(255, 255, 255, 0.7);
    }

    .text-white-50 {
        color: rgba(255, 255, 255, 0.5);
    }

    .border-white-20 {
        border-color: rgba(255, 255, 255, 0.2);
    }

    .border-white-50 {
        border-color: rgba(255, 255, 255, 0.5);
    }

    /* RTL animation support */
    [dir="rtl"] .animate-slide-in {
        animation-name: slideInRTL;
    }

    /* Contain utilities for performance */
    .contain-layout {
        contain: layout;
    }

    .contain-paint {
        contain: paint;
    }

    .contain-layout-paint {
        contain: layout paint;
    }
}

/* ========================================
   VIEW TRANSITIONS
   ======================================== */
::view-transition-old(root),
::view-transition-new(root) {
    animation-duration: 0.1s;
}

/* ========================================
   REDUCED MOTION
   ======================================== */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
    }
}